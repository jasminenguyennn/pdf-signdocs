{"version":3,"sources":["components/Assign/AssignSlice.js","components/Assign/Assign.js","components/MergeAnnotations/MergeAnnotations.js","firebase/firebase.js","firebase/firebaseSlice.js","components/Profile/Profile.js","components/AssignUsers.js","components/SignUp/SignUp.js","components/PrepareDocument/PrepareDocument.js","components/Preparation.js","components/SignDocument/SignDocumentSlice.js","components/SignDocument/SignDocument.js","components/Sign.js","components/ViewDocument/ViewDocumentSlice.js","components/ViewDocument/ViewDocument.js","components/View.js","components/PasswordReset/PasswordReset.js","components/Lists/SignList.js","components/Lists/SignedList.js","components/Welcome.js","App.js","app/store.js","index.js"],"names":["AssignSlice","createSlice","name","initialState","signees","reducers","addSignee","state","action","key","payload","email","resetSignee","console","log","actions","selectAssignees","assign","Assign","useState","setEmail","displayName","setDisplayName","showToast","setShowToast","assignees","useSelector","dispatch","useDispatch","navigate","useNavigate","padding","size","id","onChange","event","value","placeholder","label","type","onClick","Date","getTime","addUser","text","color","inline","Header","Row","HeaderCell","weight","Body","map","user","Cell","length","setTimeout","fit","dangerouslySetInlineStyle","__style","bottom","left","transform","paddingX","position","mergeAnnotations","docRef","xfdf","a","Core","window","PDFNet","setWorkerPath","storageRef","storage","ref","child","getDownloadURL","URL","main","PDFDoc","createFromURL","doc","initSecurityHandler","i","FDFDoc","createFromXFDF","fdfDoc","fdfMerge","flattenAnnotations","saveMemoryBuffer","SDFDoc","SaveOptions","e_linearized","docbuf","blob","Blob","put","then","snapshot","runWithCleanup","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","additionalData","userRef","uid","get","exists","photoURL","set","error","getUserDocument","userDocument","data","addDocumentToSign","emails","signedBy","requestedTime","collection","add","signed","signedTime","catch","updateDocumentToSign","docId","xfdfSigned","documentRef","includes","signedByArray","xfdfArray","update","time","searchForDocumentToSign","documentsRef","query","where","querySigned","docIds","docIdSigned","querySnapshot","forEach","push","searchForDocumentsSigned","firebaseSlice","docs","docsSigned","setUser","selectUser","ProfilePage","display","direction","paddingY","span","to","className","src","signOut","accessibilityLabel","AssignUsers","SignUp","password","setPassword","setError","createUserWithEmailAndPasswordHandler","createUserWithEmailAndPassword","PrepareDocument","instance","setInstance","dropPoint","setDropPoint","assigneesValues","initialAssignee","assignee","setAssignee","viewer","useRef","filePicker","useEffect","WebViewer","path","disabledElements","current","iframeWindow","UI","setToolbarGroup","iframeDoc","document","body","addEventListener","dragOver","e","drop","onchange","file","target","files","loadDocument","applyFields","Annotations","documentViewer","annotationManager","getAnnotationManager","fieldManager","getFieldManager","annotationsList","getAnnotationsList","annotsToDelete","annotsToDraw","Promise","all","annot","index","custom","field","Forms","Field","getContents","now","inputAnnot","TextWidgetAnnotation","SignatureWidgetAnnotation","appearance","appearances","_DEFAULT","Normal","offset","x","y","F","javascript","K","DatePickerWidgetAnnotation","deleteAnnotation","PageNumber","getPageNumber","X","getX","Y","getY","rotation","Rotation","Width","getWidth","Height","getHeight","WidgetAnnotation","getCustomStyles","widget","border","addAnnotation","addField","deleteAnnotations","drawAnnotationsFromList","uploadForSigning","point","flag","getDocument","displayMode","getDisplayModeManager","getDisplayMode","page","getSelectedPages","first","page_idx","getCurrentPage","page_info","getPageInfo","page_point","windowToPage","zoom","getZoom","textAnnot","FreeTextAnnotation","getCompleteRotation","width","height","setPadding","Rect","setContents","FontSize","FillColor","Color","TextColor","StrokeThickness","StrokeColor","TextAlign","Author","getCurrentUser","deselectAllAnnotations","redrawAnnotation","selectAnnotation","referenceString","docViewer","annotManager","exportAnnotations","widgets","fields","xfdfString","getFileData","arr","Uint8Array","preventDefault","scrollElement","getScrollViewElement","scrollLeft","scrollTop","pageX","pageY","dragStart","style","opacity","copy","cloneNode","appendChild","dataTransfer","setDragImage","setData","dragEnd","removeChild","getElementById","flex","gap","click","iconEnd","options","draggable","onDragStart","onDragEnd","Preparation","SignDocumentSlice","docToSign","setDocToSign","resetDocToSign","selectDocToSign","signDoc","SignDocument","setAnnotationManager","annotPosition","setAnnotPosition","normalStyles","on","annotations","imported","fieldName","startsWith","Hidden","Listable","completeSigning","links","annots","jumpToAnnotation","Sign","ViewDocumentSlice","docToView","setDocToView","resetDocToView","selectDocToView","viewDoc","ViewDocument","doneViewing","downloadPdf","View","PasswordReset","emailHasBeenSent","setEmailHasBeenSent","sendPasswordResetEmail","SignList","setDocs","show","setShow","docsToSign","seconds","toDateString","SignedList","docsToView","App","onAuthStateChanged","userAuth","exact","element","RequireAuth","Welcome","children","location","useLocation","from","replace","configureStore","reducer","firebaseReducer","AssignReducer","SignDocumentReducer","ViewDocumentReducer","ReactDOM","render","StrictMode","store"],"mappings":"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","file":"static/js/main.aa9a95f5.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nexport const AssignSlice = createSlice({\n  name: 'assign',\n  initialState: {\n    signees: [],\n  },\n  reducers: {\n    addSignee: (state, action) => {\n      state.signees = [...state.signees, { key: action.payload.key, name: action.payload.name, email: action.payload.email } ];\n    },\n    resetSignee: (state, action) => {\n      console.log('resetSignee');\n      state.signees = [];\n    }\n  },\n});\n\nexport const { addSignee, resetSignee } = AssignSlice.actions;\n\nexport const selectAssignees = state => state.assign.signees;\n\nexport default AssignSlice.reducer;\n","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  Box,\n  Button,\n  Container,\n  Heading,\n  TextField,\n  Table,\n  Text,\n  Toast,\n} from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { addSignee, selectAssignees } from './AssignSlice';\n\nconst Assign = () => {\n  const [email, setEmail] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [showToast, setShowToast] = useState(false);\n  const assignees = useSelector(selectAssignees);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const prepare = () => {\n    if (assignees.length > 0) {\n      navigate(`/prepareDocument`);\n    } else {\n      setShowToast(true);\n      setTimeout(() => setShowToast(false), 1000);\n    }\n  };\n\n  const addUser = (name, email) => {\n    const key = `${new Date().getTime()}${email}`;\n    if (name !== '' && email !== '') {\n      dispatch(addSignee({ key, name, email }));\n      setEmail('');\n      setDisplayName('');\n    }\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            <Heading size=\"md\">Who needs to sign?</Heading>\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"displayName\"\n              onChange={event => setDisplayName(event.value)}\n              placeholder=\"Enter recipient's name\"\n              label=\"Name\"\n              value={displayName}\n              type=\"text\"\n            />\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter recipient's email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                addUser(displayName, email);\n              }}\n              text=\"Add user\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n          <Box padding={2}>\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">Name</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">Email</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {assignees.map(user => (\n                  <Table.Row key={user.key}>\n                    <Table.Cell>\n                      <Text>{user.name}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>{user.email}</Text>\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </Box>\n          <Box padding={2}>\n            <Button onClick={prepare} text=\"Continue\" color=\"blue\" inline />\n          </Box>\n          <Box\n            fit\n            dangerouslySetInlineStyle={{\n              __style: {\n                bottom: 50,\n                left: '50%',\n                transform: 'translateX(-50%)',\n              },\n            }}\n            paddingX={1}\n            position=\"fixed\"\n          >\n            {showToast && (\n              <Toast color=\"red\" text={<>Please add at least one user</>} />\n            )}\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\n\nexport default Assign;\n","import { storage } from '../../firebase/firebase';\n\nexport const mergeAnnotations = async (docRef, xfdf) => {\n  const Core = window.Core;\n  const PDFNet = window.PDFNet;\n  Core.setWorkerPath('./webviewer/core');\n\n  const storageRef = storage.ref();\n  const URL = await storageRef.child(docRef).getDownloadURL();\n  \n  const main = async () => {\n    const doc = await PDFNet.PDFDoc.createFromURL(URL);\n    doc.initSecurityHandler();\n\n    let i;\n    for (i=0; i < xfdf.length; i++) {\n        console.log(xfdf[i]);\n        let fdfDoc = await PDFNet.FDFDoc.createFromXFDF(xfdf[i]);\n        await doc.fdfMerge(fdfDoc);\n        await doc.flattenAnnotations();\n    }\n  \n    const docbuf = await doc.saveMemoryBuffer(\n      PDFNet.SDFDoc.SaveOptions.e_linearized,\n    );\n    const blob = new Blob([docbuf], {\n      type: 'application/pdf',\n    });\n  \n    const documentRef = storageRef.child(docRef);\n  \n    documentRef.put(blob).then(function (snapshot) {\n      console.log('Uploaded the blob');\n    });\n  }\n\n  await PDFNet.runWithCleanup(main);\n};\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport 'firebase/storage';\n\nimport { mergeAnnotations } from '../components/MergeAnnotations/MergeAnnotations';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport const storage = firebase.storage();\n\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\n\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return;\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n  if (!snapshot.exists) {\n    const { email, displayName, photoURL } = user;\n    try {\n      await userRef.set({\n        displayName,\n        email,\n        photoURL,\n        ...additionalData,\n      });\n    } catch (error) {\n      console.error('Error creating user document', error);\n    }\n  }\n  return getUserDocument(user.uid);\n};\n\nconst getUserDocument = async uid => {\n  if (!uid) return null;\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    return {\n      uid,\n      ...userDocument.data(),\n    };\n  } catch (error) {\n    console.error('Error fetching user', error);\n  }\n};\n\nexport const addDocumentToSign = async (uid, email, docRef, emails) => {\n  if (!uid) return;\n  const signed = false;\n  const xfdf = [];\n  const signedBy = [];\n  const requestedTime = new Date();\n  const signedTime = '';\n  firestore\n    .collection('documentsToSign')\n    .add({\n      uid,\n      email,\n      docRef,\n      emails,\n      xfdf,\n      signedBy,\n      signed,\n      requestedTime,\n      signedTime,\n    })\n    .then(function (docRef) {\n      console.log('Document written with ID: ', docRef.id);\n    })\n    .catch(function (error) {\n      console.error('Error adding document: ', error);\n    });\n};\n\nexport const updateDocumentToSign = async (docId, email, xfdfSigned) => {\n  const documentRef = firestore.collection('documentsToSign').doc(docId);\n  documentRef\n    .get()\n    .then(async doc => {\n      if (doc.exists) {\n        const { signedBy, emails, xfdf, docRef } = doc.data();\n        if (!signedBy.includes(email)) {\n          const signedByArray = [...signedBy, email];\n          const xfdfArray = [...xfdf, xfdfSigned];\n          await documentRef.update({\n            xfdf: xfdfArray,\n            signedBy: signedByArray,\n          });\n\n          if (signedByArray.length === emails.length) {\n            const time = new Date();\n            await documentRef.update({\n              signed: true,\n              signedTime: time,\n            });\n\n            mergeAnnotations(docRef, xfdfArray);\n          }\n        }\n      } else {\n        console.log('No such document!');\n      }\n    })\n    .catch(function (error) {\n      console.log('Error getting document:', error);\n    });\n};\n\nexport const searchForDocumentToSign = async email => {\n  const documentsRef = firestore.collection('documentsToSign');\n  const query = documentsRef\n    .where('emails', 'array-contains', email)\n    .where('signed', '==', false);\n\n  const querySigned = documentsRef\n    .where('signedBy', 'array-contains', email);\n\n  const docIds = [];\n  const docIdSigned = [];\n\n  await querySigned\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const docId = doc.id;\n        docIdSigned.push(docId);\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n\n  await query\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const { docRef, email, requestedTime } = doc.data();\n        const docId = doc.id;\n        if (!docIdSigned.includes(docId)) {\n          docIds.push({ docRef, email, requestedTime, docId });\n        }\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n  return docIds;\n};\n\nexport const searchForDocumentsSigned = async email => {\n  const documentsRef = firestore.collection('documentsToSign');\n\n  const docIds = [];\n\n  let query = documentsRef\n    .where('email', '==', email)\n    .where('signed', '==', true);\n\n  await query\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const { docRef, emails, signedTime } = doc.data();\n        const docId = doc.id;\n        docIds.push({ docRef, emails, signedTime, docId });\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n\n  return docIds;\n};\n","import { createSlice } from '@reduxjs/toolkit';\n\nexport const firebaseSlice = createSlice({\n  name: 'firebase',\n  initialState: {\n    user: null,\n    docs: [],\n    docsSigned: [],\n  },\n  reducers: {\n    setUser: (state, action) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.user = action.payload;\n    },\n  },\n});\n\nexport const { setUser } = firebaseSlice.actions;\n\n// The function below is called a selector and allows us to select a value from\n// the state. Selectors can also be defined inline where they're used instead of\n// in the slice file. For example: `useSelector((state) => state.counter.value)`\nexport const selectUser = state => state.firebase.user;\n\nexport default firebaseSlice.reducer;\n","import React from \"react\";\nimport {\n  Box,\n  Button,\n  Text,\n  Avatar,\n  Row,\n  Stack,\n  Column,\n  Heading,\n} from \"gestalt\";\nimport \"gestalt/dist/gestalt.css\";\nimport { auth } from \"../../firebase/firebase\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectUser, setUser } from \"../../firebase/firebaseSlice\";\nimport { resetSignee } from \"../Assign/AssignSlice\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"./Profile.css\";\n\nconst ProfilePage = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const user = useSelector(selectUser);\n  if (!user) {\n    return null;\n  }\n\n  const { displayName, photoURL, email } = user;\n\n  return (\n    <Box display=\"flex\" direction=\"row\" paddingY={2} color={\"lightGray\"}>\n      <Column span={9}>\n        <Box padding={3}>\n          <Link to=\"/\" className=\"profileLink\">\n            <Heading size=\"lg\">PDFTron Sign App</Heading>\n          </Link>\n        </Box>\n      </Column>\n      <Column span={3}>\n        <Box padding={1}>\n          <Row>\n            <Box padding={1}>\n              <Avatar name={displayName} size=\"md\" src={photoURL} />\n            </Box>\n            <Stack>\n              <Text weight=\"bold\">{displayName}</Text>\n              <Text>{email}</Text>\n            </Stack>\n            <Box padding={1}>\n              <Button\n                onClick={() => {\n                  auth.signOut();\n                  dispatch(setUser(null));\n                  dispatch(resetSignee());\n                  navigate(\"/\");\n                }}\n                accessibilityLabel=\"Sign out of your account\"\n                text=\"Sign out\"\n              />\n            </Box>\n          </Row>\n        </Box>\n      </Column>\n    </Box>\n  );\n};\nexport default ProfilePage;\n","import React from 'react';\nimport Assign from './Assign/Assign';\nimport Profile from './Profile/Profile';\n\nconst AssignUsers = () => {\n  return (\n    <div>\n      <Profile />\n      <Assign />\n    </div>\n  );\n};\n\nexport default AssignUsers;\n","import React, { useState } from \"react\";\nimport { Link, useNavigate, Navigate } from \"react-router-dom\";\nimport {\n  auth,\n  signInWithGoogle,\n  generateUserDocument,\n} from \"../../firebase/firebase\";\nimport {\n  Box,\n  Button,\n  Toast,\n  Container,\n  Text,\n  TextField,\n  Heading,\n} from \"gestalt\";\nimport \"gestalt/dist/gestalt.css\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../firebase/firebaseSlice\";\n\nconst SignUp = () => {\n  const user = useSelector(selectUser);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [displayName, setDisplayName] = useState(\"\");\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const createUserWithEmailAndPasswordHandler = async (\n    event,\n    email,\n    password\n  ) => {\n    try {\n      const { user } = await auth.createUserWithEmailAndPassword(\n        email,\n        password\n      );\n      generateUserDocument(user, { displayName });\n    } catch (error) {\n      setError(\"Error Signing up with email and password\");\n    }\n\n    setEmail(\"\");\n    setPassword(\"\");\n    setDisplayName(\"\");\n  };\n\n  if (user) {\n    return <Navigate to=\"/\" />;\n  }\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            {error !== null && <Toast text={error} />}\n            <Heading size=\"md\">Sign up</Heading>\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"displayName\"\n              onChange={(event) => setDisplayName(event.value)}\n              placeholder=\"Enter your name\"\n              label=\"Name\"\n              value={displayName}\n              type=\"text\"\n            />\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={(event) => setEmail(event.value)}\n              placeholder=\"Enter your email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"password\"\n              onChange={(event) => setPassword(event.value)}\n              placeholder=\"Enter your password\"\n              label=\"Password\"\n              value={password}\n              type=\"password\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={(event) => {\n                createUserWithEmailAndPasswordHandler(event, email, password);\n                navigate(\"/\");\n              }}\n              text=\"Sign up\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n\n          <Box padding={2}>\n            <Text>or</Text>\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={signInWithGoogle}\n              text=\"Sign in with Google\"\n              color=\"red\"\n              inline\n            />\n          </Box>\n          <Box padding={2}>\n            <Text>Already have an account?</Text>\n          </Box>\n          <Box padding={2}>\n            <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\n              Sign in here\n            </Link>\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\nexport default SignUp;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  Box,\n  Column,\n  Heading,\n  Row,\n  Stack,\n  Text,\n  Button,\n  SelectList,\n} from \"gestalt\";\nimport { selectAssignees, resetSignee } from \"../Assign/AssignSlice\";\nimport { storage, addDocumentToSign } from \"../../firebase/firebase\";\nimport { selectUser } from \"../../firebase/firebaseSlice\";\nimport WebViewer from \"@pdftron/webviewer\";\nimport \"gestalt/dist/gestalt.css\";\nimport \"./PrepareDocument.css\";\n\nconst PrepareDocument = () => {\n  const [instance, setInstance] = useState(null);\n  const [dropPoint, setDropPoint] = useState(null);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  const assignees = useSelector(selectAssignees);\n  const assigneesValues = assignees.map((user) => {\n    return { value: user.email, label: user.name };\n  });\n  let initialAssignee =\n    assigneesValues.length > 0 ? assigneesValues[0].value : \"\";\n  const [assignee, setAssignee] = useState(initialAssignee);\n\n  const user = useSelector(selectUser);\n  const { uid, email } = user;\n\n  const viewer = useRef(null);\n  const filePicker = useRef(null);\n\n  // if using a class, equivalent of componentDidMount\n  useEffect(() => {\n    WebViewer(\n      {\n        path: \"webviewer\",\n        disabledElements: [\n          \"ribbons\",\n          \"toggleNotesButton\",\n          \"searchButton\",\n          \"menuButton\",\n        ],\n      },\n      viewer.current\n    ).then((instance) => {\n      const { iframeWindow } = instance;\n\n      // select only the view group\n      instance.UI.setToolbarGroup(\"toolbarGroup-View\");\n\n      setInstance(instance);\n\n      const iframeDoc = iframeWindow.document.body;\n      iframeDoc.addEventListener(\"dragover\", dragOver);\n      iframeDoc.addEventListener(\"drop\", (e) => {\n        drop(e, instance);\n      });\n\n      filePicker.current.onchange = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n          instance.UI.loadDocument(file);\n        }\n      };\n    });\n  }, []);\n\n  const applyFields = async () => {\n    const { Annotations, documentViewer } = instance.Core;\n    const annotationManager = documentViewer.getAnnotationManager();\n    const fieldManager = annotationManager.getFieldManager();\n    const annotationsList = annotationManager.getAnnotationsList();\n    const annotsToDelete = [];\n    const annotsToDraw = [];\n\n    await Promise.all(\n      annotationsList.map(async (annot, index) => {\n        let inputAnnot;\n        let field;\n\n        if (typeof annot.custom !== \"undefined\") {\n          // create a form field based on the type of annotation\n          if (annot.custom.type === \"TEXT\") {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: \"Tx\",\n                value: annot.custom.value,\n              }\n            );\n            inputAnnot = new Annotations.TextWidgetAnnotation(field);\n          } else if (annot.custom.type === \"SIGNATURE\") {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: \"Sig\",\n              }\n            );\n            inputAnnot = new Annotations.SignatureWidgetAnnotation(field, {\n              appearance: \"_DEFAULT\",\n              appearances: {\n                _DEFAULT: {\n                  Normal: {\n                    data: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuMWMqnEsAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC\",\n                    offset: {\n                      x: 100,\n                      y: 100,\n                    },\n                  },\n                },\n              },\n            });\n          } else if (annot.custom.type === \"DATE\") {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: \"Tx\",\n                value: \"m-d-yyyy\",\n                // Actions need to be added for DatePickerWidgetAnnotation to recognize this field.\n                actions: {\n                  F: [\n                    {\n                      name: \"JavaScript\",\n                      // You can customize the date format here between the two double-quotation marks\n                      // or leave this blank to use the default format\n                      javascript: 'AFDate_FormatEx(\"mmm d, yyyy\");',\n                    },\n                  ],\n                  K: [\n                    {\n                      name: \"JavaScript\",\n                      // You can customize the date format here between the two double-quotation marks\n                      // or leave this blank to use the default format\n                      javascript: 'AFDate_FormatEx(\"mmm d, yyyy\");',\n                    },\n                  ],\n                },\n              }\n            );\n\n            inputAnnot = new Annotations.DatePickerWidgetAnnotation(field);\n          } else {\n            // exit early for other annotations\n            annotationManager.deleteAnnotation(annot, false, true); // prevent duplicates when importing xfdf\n            return;\n          }\n        } else {\n          // exit early for other annotations\n          return;\n        }\n\n        // set position\n        inputAnnot.PageNumber = annot.getPageNumber();\n        inputAnnot.X = annot.getX();\n        inputAnnot.Y = annot.getY();\n        inputAnnot.rotation = annot.Rotation;\n        if (annot.Rotation === 0 || annot.Rotation === 180) {\n          inputAnnot.Width = annot.getWidth();\n          inputAnnot.Height = annot.getHeight();\n        } else {\n          inputAnnot.Width = annot.getHeight();\n          inputAnnot.Height = annot.getWidth();\n        }\n\n        // delete original annotation\n        annotsToDelete.push(annot);\n\n        // customize styles of the form field\n        Annotations.WidgetAnnotation.getCustomStyles = function (widget) {\n          if (widget instanceof Annotations.SignatureWidgetAnnotation) {\n            return {\n              border: \"1px solid #a5c7ff\",\n            };\n          }\n        };\n        Annotations.WidgetAnnotation.getCustomStyles(inputAnnot);\n\n        // draw the annotation the viewer\n        annotationManager.addAnnotation(inputAnnot);\n        fieldManager.addField(field);\n        annotsToDraw.push(inputAnnot);\n      })\n    );\n\n    // delete old annotations\n    annotationManager.deleteAnnotations(annotsToDelete, null, true);\n\n    // refresh viewer\n    await annotationManager.drawAnnotationsFromList(annotsToDraw);\n    await uploadForSigning();\n  };\n\n  const addField = (type, point = {}, name = \"\", value = \"\", flag = {}) => {\n    const { documentViewer, Annotations } = instance.Core;\n    const annotationManager = documentViewer.getAnnotationManager();\n    const doc = documentViewer.getDocument();\n    const displayMode = documentViewer.getDisplayModeManager().getDisplayMode();\n    const page = displayMode.getSelectedPages(point, point);\n    if (!!point.x && page.first == null) {\n      return; //don't add field to an invalid page location\n    }\n    const page_idx =\n      page.first !== null ? page.first : documentViewer.getCurrentPage();\n    const page_info = doc.getPageInfo(page_idx);\n    const page_point = displayMode.windowToPage(point, page_idx);\n    const zoom = documentViewer.getZoom();\n\n    var textAnnot = new Annotations.FreeTextAnnotation();\n    textAnnot.PageNumber = page_idx;\n    const rotation = documentViewer.getCompleteRotation(page_idx) * 90;\n    textAnnot.Rotation = rotation;\n    if (rotation === 270 || rotation === 90) {\n      textAnnot.Width = 50.0 / zoom;\n      textAnnot.Height = 250.0 / zoom;\n    } else {\n      textAnnot.Width = 250.0 / zoom;\n      textAnnot.Height = 50.0 / zoom;\n    }\n    textAnnot.X = (page_point.x || page_info.width / 2) - textAnnot.Width / 2;\n    textAnnot.Y = (page_point.y || page_info.height / 2) - textAnnot.Height / 2;\n\n    textAnnot.setPadding(new Annotations.Rect(0, 0, 0, 0));\n    textAnnot.custom = {\n      type,\n      value,\n      flag,\n      name: `${assignee}_${type}_`,\n    };\n\n    // set the type of annot\n    textAnnot.setContents(textAnnot.custom.name);\n    textAnnot.FontSize = \"\" + 20.0 / zoom + \"px\";\n    textAnnot.FillColor = new Annotations.Color(211, 211, 211, 0.5);\n    textAnnot.TextColor = new Annotations.Color(0, 165, 228);\n    textAnnot.StrokeThickness = 1;\n    textAnnot.StrokeColor = new Annotations.Color(0, 165, 228);\n    textAnnot.TextAlign = \"center\";\n\n    textAnnot.Author = annotationManager.getCurrentUser();\n\n    annotationManager.deselectAllAnnotations();\n    annotationManager.addAnnotation(textAnnot, true);\n    annotationManager.redrawAnnotation(textAnnot);\n    annotationManager.selectAnnotation(textAnnot);\n  };\n\n  const uploadForSigning = async () => {\n    // upload the PDF with fields as AcroForm\n    const storageRef = storage.ref();\n    const referenceString = `docToSign/${uid}${Date.now()}.pdf`;\n    const docRef = storageRef.child(referenceString);\n    const { docViewer, annotManager } = instance;\n    const doc = docViewer.getDocument();\n    const xfdfString = await annotManager.exportAnnotations({\n      widgets: true,\n      fields: true,\n    });\n    const data = await doc.getFileData({ xfdfString });\n    const arr = new Uint8Array(data);\n    const blob = new Blob([arr], { type: \"application/pdf\" });\n    docRef.put(blob).then(function (snapshot) {\n      console.log(\"Uploaded the blob\");\n    });\n\n    // create an entry in the database\n    const emails = assignees.map((assignee) => {\n      return assignee.email;\n    });\n    await addDocumentToSign(uid, email, referenceString, emails);\n    dispatch(resetSignee());\n    navigate(\"/\");\n  };\n\n  const dragOver = (e) => {\n    e.preventDefault();\n    return false;\n  };\n\n  const drop = (e, instance) => {\n    const { docViewer } = instance;\n    const scrollElement = docViewer.getScrollViewElement();\n    const scrollLeft = scrollElement.scrollLeft || 0;\n    const scrollTop = scrollElement.scrollTop || 0;\n    setDropPoint({ x: e.pageX + scrollLeft, y: e.pageY + scrollTop });\n    e.preventDefault();\n    return false;\n  };\n\n  const dragStart = (e) => {\n    e.target.style.opacity = 0.5;\n    const copy = e.target.cloneNode(true);\n    copy.id = \"form-build-drag-image-copy\";\n    copy.style.width = \"250px\";\n    document.body.appendChild(copy);\n    e.dataTransfer.setDragImage(copy, 125, 25);\n    e.dataTransfer.setData(\"text\", \"\");\n  };\n\n  const dragEnd = (e, type) => {\n    addField(type, dropPoint);\n    e.target.style.opacity = 1;\n    document.body.removeChild(\n      document.getElementById(\"form-build-drag-image-copy\")\n    );\n    e.preventDefault();\n  };\n\n  return (\n    <div className={\"prepareDocument\"}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">Prepare Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{\"Step 1\"}</Text>\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={() => {\n                      if (filePicker) {\n                        filePicker.current.click();\n                      }\n                    }}\n                    accessibilityLabel=\"upload a document\"\n                    text=\"Upload a document\"\n                    iconEnd=\"add-circle\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n            <Row>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{\"Step 2\"}</Text>\n                </Box>\n                <Box padding={2}>\n                  <SelectList\n                    id=\"assigningFor\"\n                    name=\"assign\"\n                    onChange={({ value }) => setAssignee(value)}\n                    options={assigneesValues}\n                    placeholder=\"Select recipient\"\n                    label=\"Adding signature for\"\n                    value={assignee}\n                  />\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={(e) => dragStart(e)}\n                    onDragEnd={(e) => dragEnd(e, \"SIGNATURE\")}\n                  >\n                    <Button\n                      onClick={() => addField(\"SIGNATURE\")}\n                      accessibilityLabel=\"add signature\"\n                      text=\"Add signature\"\n                      iconEnd=\"compose\"\n                    />\n                  </div>\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={(e) => dragStart(e)}\n                    onDragEnd={(e) => dragEnd(e, \"TEXT\")}\n                  >\n                    <Button\n                      onClick={() => addField(\"TEXT\")}\n                      accessibilityLabel=\"add text\"\n                      text=\"Add text\"\n                      iconEnd=\"text-sentence-case\"\n                    />\n                  </div>\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={(e) => dragStart(e)}\n                    onDragEnd={(e) => dragEnd(e, \"DATE\")}\n                  >\n                    <Button\n                      onClick={() => addField(\"DATE\")}\n                      accessibilityLabel=\"add date field\"\n                      text=\"Add date\"\n                      iconEnd=\"calendar\"\n                    />\n                  </div>\n                </Box>\n              </Stack>\n            </Row>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{\"Step 3\"}</Text>\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={applyFields}\n                    accessibilityLabel=\"Send for signing\"\n                    text=\"Send\"\n                    iconEnd=\"send\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n      <input type=\"file\" ref={filePicker} style={{ display: \"none\" }} />\n    </div>\n  );\n};\n\nexport default PrepareDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport PrepareDocument from './PrepareDocument/PrepareDocument';\n\nconst Preparation = () => {\n  return (\n    <div>\n      <Profile />\n      <PrepareDocument />\n    </div>\n  );\n};\n\nexport default Preparation;","import { createSlice } from '@reduxjs/toolkit';\n\nexport const SignDocumentSlice = createSlice({\n  name: 'signDoc',\n  initialState: {\n    docToSign: null,\n  },\n  reducers: {\n    setDocToSign: (state, action) => {\n      state.docToSign = action.payload;\n    },\n    resetDocToSign: (state, action) => {\n      state.docToSign = null;\n    }\n  },\n});\n\nexport const { setDocToSign, resetDocToSign } = SignDocumentSlice.actions;\n\nexport const selectDocToSign = state => state.signDoc.docToSign;\n\nexport default SignDocumentSlice.reducer;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Box, Column, Heading, Row, Stack, Button } from \"gestalt\";\nimport { selectDocToSign } from \"./SignDocumentSlice\";\nimport { storage, updateDocumentToSign } from \"../../firebase/firebase\";\nimport { selectUser } from \"../../firebase/firebaseSlice\";\nimport WebViewer from \"@pdftron/webviewer\";\nimport \"gestalt/dist/gestalt.css\";\nimport \"./SignDocument.css\";\n\nconst SignDocument = () => {\n  const [annotationManager, setAnnotationManager] = useState(null);\n  const [annotPosition, setAnnotPosition] = useState(0);\n  const navigate = useNavigate();\n  const doc = useSelector(selectDocToSign);\n  const user = useSelector(selectUser);\n  const { docRef, docId } = doc;\n  const { email } = user;\n\n  const viewer = useRef(null);\n\n  useEffect(() => {\n    WebViewer(\n      {\n        path: \"webviewer\",\n        disabledElements: [\n          \"ribbons\",\n          \"toggleNotesButton\",\n          \"searchButton\",\n          \"menuButton\",\n          \"rubberStampToolGroupButton\",\n          \"stampToolGroupButton\",\n          \"fileAttachmentToolGroupButton\",\n          \"calloutToolGroupButton\",\n          \"undo\",\n          \"redo\",\n          \"eraserToolButton\",\n        ],\n      },\n      viewer.current\n    ).then(async (instance) => {\n      const { documentViewer, annotationManager, Annotations } = instance.Core;\n      setAnnotationManager(annotationManager);\n\n      // select only the insert group\n      instance.UI.setToolbarGroup(\"toolbarGroup-Insert\");\n\n      // load document\n      const storageRef = storage.ref();\n      const URL = await storageRef.child(docRef).getDownloadURL();\n      documentViewer.loadDocument(URL);\n\n      const normalStyles = (widget) => {\n        if (widget instanceof Annotations.TextWidgetAnnotation) {\n          return {\n            \"background-color\": \"#a5c7ff\",\n            color: \"white\",\n          };\n        } else if (widget instanceof Annotations.SignatureWidgetAnnotation) {\n          return {\n            border: \"1px solid #a5c7ff\",\n          };\n        }\n      };\n\n      annotationManager.on(\n        \"annotationChanged\",\n        (annotations, action, { imported }) => {\n          if (imported && action === \"add\") {\n            annotations.forEach(function (annot) {\n              if (annot instanceof Annotations.WidgetAnnotation) {\n                Annotations.WidgetAnnotation.getCustomStyles = normalStyles;\n                if (!annot.fieldName.startsWith(email)) {\n                  annot.Hidden = true;\n                  annot.Listable = false;\n                }\n              }\n            });\n          }\n        }\n      );\n    });\n  }, [docRef, email]);\n\n  const nextField = () => {\n    let annots = annotationManager.getAnnotationsList();\n    if (annots[annotPosition]) {\n      annotationManager.jumpToAnnotation(annots[annotPosition]);\n      if (annots[annotPosition + 1]) {\n        setAnnotPosition(annotPosition + 1);\n      }\n    }\n  };\n\n  const prevField = () => {\n    let annots = annotationManager.getAnnotationsList();\n    if (annots[annotPosition]) {\n      annotationManager.jumpToAnnotation(annots[annotPosition]);\n      if (annots[annotPosition - 1]) {\n        setAnnotPosition(annotPosition - 1);\n      }\n    }\n  };\n\n  const completeSigning = async () => {\n    const xfdf = await annotationManager.exportAnnotations({\n      widgets: false,\n      links: false,\n    });\n    await updateDocumentToSign(docId, email, xfdf);\n    navigate(\"/\");\n  };\n\n  return (\n    <div className={\"prepareDocument\"}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">Sign Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Button\n                    onClick={nextField}\n                    accessibilityLabel=\"next field\"\n                    text=\"Next field\"\n                    iconEnd=\"arrow-forward\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={prevField}\n                    accessibilityLabel=\"Previous field\"\n                    text=\"Previous field\"\n                    iconEnd=\"arrow-back\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={completeSigning}\n                    accessibilityLabel=\"complete signing\"\n                    text=\"Complete signing\"\n                    iconEnd=\"compose\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n    </div>\n  );\n};\n\nexport default SignDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport SignDocument from './SignDocument/SignDocument';\n\nconst Sign = () => {\n  return (\n    <div>\n      <Profile />\n      <SignDocument />\n    </div>\n  );\n};\n\nexport default Sign;","import { createSlice } from '@reduxjs/toolkit';\n\nexport const ViewDocumentSlice = createSlice({\n  name: 'viewDoc',\n  initialState: {\n    docToView: null,\n  },\n  reducers: {\n    setDocToView: (state, action) => {\n      state.docToView = action.payload;\n    },\n    resetDocToView: (state, action) => {\n      state.docToView = null;\n    }\n  },\n});\n\nexport const { setDocToView, resetDocToView } = ViewDocumentSlice.actions;\n\nexport const selectDocToView = state => state.viewDoc.docToView;\n\nexport default ViewDocumentSlice.reducer;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Box, Column, Heading, Row, Stack, Button } from \"gestalt\";\nimport { selectDocToView } from \"./ViewDocumentSlice\";\nimport { storage } from \"../../firebase/firebase\";\nimport WebViewer from \"@pdftron/webviewer\";\nimport \"gestalt/dist/gestalt.css\";\nimport \"./ViewDocument.css\";\n\nconst ViewDocument = () => {\n  const [instance, setInstance] = useState(null);\n  const navigate = useNavigate();\n  const doc = useSelector(selectDocToView);\n  const { docRef } = doc;\n\n  const viewer = useRef(null);\n\n  useEffect(() => {\n    WebViewer(\n      {\n        path: \"webviewer\",\n        disabledElements: [\"ribbons\", \"toggleNotesButton\", \"contextMenuPopup\"],\n      },\n      viewer.current\n    ).then(async (instance) => {\n      // select only the view group\n      instance.UI.setToolbarGroup(\"toolbarGroup-View\");\n\n      setInstance(instance);\n\n      // load document\n      const storageRef = storage.ref();\n      const URL = await storageRef.child(docRef).getDownloadURL();\n      console.log(URL);\n      instance.Core.documentViewer.loadDocument(URL);\n    });\n  }, [docRef]);\n\n  const download = () => {\n    instance.UI.downloadPdf(true);\n  };\n\n  const doneViewing = async () => {\n    navigate(\"/\");\n  };\n\n  return (\n    <div className={\"prepareDocument\"}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">View Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Button\n                    onClick={download}\n                    accessibilityLabel=\"download signed document\"\n                    text=\"Download\"\n                    iconEnd=\"download\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={doneViewing}\n                    accessibilityLabel=\"complete signing\"\n                    text=\"Done viewing\"\n                    iconEnd=\"check\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n    </div>\n  );\n};\n\nexport default ViewDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport ViewDocument from './ViewDocument/ViewDocument';\n\nconst View = () => {\n  return (\n    <div>\n      <Profile />\n      <ViewDocument />\n    </div>\n  );\n};\n\nexport default View;","import React, { useState } from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Box, Button, Toast, Container, TextField, Heading } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nimport { auth } from '../../firebase/firebase';\n\nconst PasswordReset = () => {\n  const [email, setEmail] = useState('');\n  const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\n  const [error, setError] = useState(null);\n\n  const navigate = useNavigate();\n  \n  const sendResetEmail = event => {\n    auth\n      .sendPasswordResetEmail(email)\n      .then(() => {\n        setEmailHasBeenSent(true);\n        setTimeout(() => {\n          setEmailHasBeenSent(false);\n        }, 3000);\n      })\n      .catch(() => {\n        setError('Error resetting password');\n      });\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            <Heading size=\"md\">Reset your password</Heading>\n          </Box>\n          {error !== null && <Toast text={error} />}\n          {emailHasBeenSent !== false && (\n            <Toast text={'An email with reset info is on the way'} />\n          )}\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter your email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                sendResetEmail(event);\n                navigate('/');\n              }}\n              text=\"Reset\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n          <Box padding={2}>\n            <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\n              Back to the Sign in\n            </Link>\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\nexport default PasswordReset;\n","import React, { useEffect, useState } from \"react\";\nimport { Button, Table, Text, Spinner } from \"gestalt\";\nimport \"gestalt/dist/gestalt.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { searchForDocumentToSign } from \"../../firebase/firebase\";\nimport { selectUser } from \"../../firebase/firebaseSlice\";\nimport { setDocToSign } from \"../SignDocument/SignDocumentSlice\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst SignList = () => {\n  const user = useSelector(selectUser);\n  const { email } = user;\n  const navigate = useNavigate();\n  const [docs, setDocs] = useState([]);\n  const [show, setShow] = useState(true);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    async function getDocs() {\n      const docsToSign = await searchForDocumentToSign(email);\n      setDocs(docsToSign);\n      setShow(false);\n    }\n\n    setTimeout(getDocs, 1000);\n  }, [email]);\n\n  return (\n    <div>\n      {show ? (\n        <Spinner show={show} accessibilityLabel=\"spinner\" />\n      ) : (\n        <div>\n          {docs.length > 0 ? (\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">From</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">When</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {docs.map((doc) => (\n                  <Table.Row key={doc.docRef}>\n                    <Table.Cell>\n                      <Text>{doc.email}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>\n                        {doc.requestedTime\n                          ? new Date(\n                              doc.requestedTime.seconds * 1000\n                            ).toDateString()\n                          : \"\"}\n                      </Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Button\n                        onClick={(event) => {\n                          const { docRef, docId } = doc;\n                          dispatch(setDocToSign({ docRef, docId }));\n                          navigate(`/signDocument`);\n                        }}\n                        text=\"Sign\"\n                        color=\"blue\"\n                        inline\n                      />\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          ) : (\n            \"You do not have any documents to sign\"\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignList;\n","import React, { useEffect, useState } from \"react\";\nimport { Button, Table, Text, Spinner } from \"gestalt\";\nimport \"gestalt/dist/gestalt.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { searchForDocumentsSigned } from \"../../firebase/firebase\";\nimport { selectUser } from \"../../firebase/firebaseSlice\";\nimport { setDocToView } from \"../ViewDocument/ViewDocumentSlice\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst SignedList = () => {\n  const user = useSelector(selectUser);\n  const { email } = user;\n  const [docs, setDocs] = useState([]);\n  const [show, setShow] = useState(true);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    async function getDocs() {\n      const docsToView = await searchForDocumentsSigned(email);\n      setDocs(docsToView);\n      setShow(false);\n    }\n    setTimeout(getDocs, 1000);\n  }, [email]);\n\n  return (\n    <div>\n      {show ? (\n        <Spinner show={show} accessibilityLabel=\"spinner\" />\n      ) : (\n        <div>\n          {docs.length > 0 ? (\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">From</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">When</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {docs.map((doc) => (\n                  <Table.Row key={doc.docRef}>\n                    <Table.Cell>\n                      {doc.emails.map((email) => (\n                        <Text key={email}>{email}</Text>\n                      ))}\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>\n                        {doc.signedTime\n                          ? new Date(\n                              doc.signedTime.seconds * 1000\n                            ).toDateString()\n                          : \"\"}\n                      </Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Button\n                        onClick={(event) => {\n                          const { docRef, docId } = doc;\n                          dispatch(setDocToView({ docRef, docId }));\n                          navigate(`/viewDocument`);\n                        }}\n                        text=\"View\"\n                        color=\"blue\"\n                        inline\n                      />\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          ) : (\n            \"You do not have any documents to review\"\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignedList;\n","import React, { useEffect } from \"react\";\nimport Profile from \"./Profile/Profile\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport SignList from \"./Lists/SignList\";\nimport SignedList from \"./Lists/SignedList\";\nimport { resetDocToView } from \"./ViewDocument/ViewDocumentSlice\";\nimport { resetDocToSign } from \"./SignDocument/SignDocumentSlice\";\nimport { Box, Button, Container, Heading } from \"gestalt\";\nimport \"gestalt/dist/gestalt.css\";\n\nconst ProfilePage = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    dispatch(resetDocToView());\n    dispatch(resetDocToSign());\n  }, [dispatch]);\n\n  return (\n    <div>\n      <Profile />\n      <Container>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Sign Documents`}</Heading>\n        </Box>\n        <Box padding={3}>\n          <SignList />\n        </Box>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Prepare Document`}</Heading>\n        </Box>\n        <Box padding={2}>\n          <Button\n            onClick={(event) => {\n              navigate(`/assignUsers`);\n            }}\n            text=\"Prepare Document for Signing\"\n            color=\"blue\"\n            inline\n          />\n        </Box>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Review Signed Documents`}</Heading>\n        </Box>\n        <Box padding={3}>\n          <SignedList />\n        </Box>\n      </Container>\n    </div>\n  );\n};\nexport default ProfilePage;\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  Routes,\r\n  Route,\r\n  HashRouter,\r\n  useLocation,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport AssignUsers from \"./components/AssignUsers\";\r\nimport SignIn from \"./components/SignIn/SignIn\";\r\nimport SignUp from \"./components/SignUp/SignUp\";\r\nimport Preparation from \"./components/Preparation\";\r\nimport Sign from \"./components/Sign\";\r\nimport View from \"./components/View\";\r\nimport Header from \"./components/Header\";\r\nimport PasswordReset from \"./components/PasswordReset/PasswordReset\";\r\nimport Welcome from \"./components/Welcome\";\r\n\r\nimport { auth, generateUserDocument } from \"./firebase/firebase\";\r\nimport { setUser, selectUser } from \"./firebase/firebaseSlice\";\r\n\r\nimport \"./App.css\";\r\n\r\n// const App = () => {\r\n//   const user = useSelector(selectUser);\r\n//   const dispatch = useDispatch();\r\n\r\n//   useEffect(() => {\r\n//     auth.onAuthStateChanged(async (userAuth) => {\r\n//       if (userAuth) {\r\n//         const user = await generateUserDocument(userAuth);\r\n//         const { uid, displayName, email, photoURL } = user;\r\n//         dispatch(setUser({ uid, displayName, email, photoURL }));\r\n//       }\r\n//     });\r\n//   }, [dispatch]);\r\n\r\n//   return (\r\n//     <HashRouter>\r\n//       {user ? (\r\n//         <Routes>\r\n//           <Route exact path=\"/\" element={<Welcome />}></Route>\r\n//           <Route path=\"/assignUsers\" element={<AssignUsers />}></Route>\r\n//           <Route path=\"/prepareDocument\" element={<Preparation />}></Route>\r\n//           <Route path=\"/signDocument\" element={<Sign />}></Route>\r\n//           <Route path=\"/viewDocument\" element={<View />}></Route>\r\n//         </Routes>\r\n//       ) : (\r\n//         <div>\r\n//           <Header />\r\n//           <Routes>\r\n//             <Route path=\"/\" element={<SignIn />}></Route>\r\n//             <Route path=\"/signUp\" element={<SignUp />}></Route>\r\n//             <Route path=\"/passwordReset\" element={<PasswordReset />}></Route>\r\n//           </Routes>\r\n//         </div>\r\n//       )}\r\n//     </HashRouter>\r\n//   );\r\n// };\r\n\r\n// export default App;\r\n\r\nexport default function App() {\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged(async (userAuth) => {\r\n      if (userAuth) {\r\n        const user = await generateUserDocument(userAuth);\r\n        const { uid, displayName, email, photoURL } = user;\r\n        dispatch(setUser({ uid, displayName, email, photoURL }));\r\n      }\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <HashRouter>\r\n      <Routes>\r\n        {/* public */}\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          element={\r\n            <RequireAuth>\r\n              <Welcome />\r\n            </RequireAuth>\r\n          }\r\n        ></Route>\r\n        <Route path=\"/signUp\" element={<SignUp />}></Route>\r\n        <Route path=\"/passwordReset\" element={<PasswordReset />}></Route>\r\n\r\n        {/* private */}\r\n        <Route\r\n          path=\"/assignUsers\"\r\n          element={\r\n            <RequireAuth>\r\n              <AssignUsers />\r\n            </RequireAuth>\r\n          }\r\n        ></Route>\r\n        <Route\r\n          path=\"/prepareDocument\"\r\n          element={\r\n            <RequireAuth>\r\n              <Preparation />\r\n            </RequireAuth>\r\n          }\r\n        ></Route>\r\n        <Route\r\n          path=\"/signDocument\"\r\n          element={\r\n            <RequireAuth>\r\n              <Sign />\r\n            </RequireAuth>\r\n          }\r\n        ></Route>\r\n        <Route\r\n          path=\"/viewDocument\"\r\n          element={\r\n            <RequireAuth>\r\n              <View />\r\n            </RequireAuth>\r\n          }\r\n        ></Route>\r\n      </Routes>\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nfunction RequireAuth({ children }: { children: JSX.Element }) {\r\n  const user = useSelector(selectUser);\r\n  let location = useLocation();\r\n  console.log({ user, children });\r\n  if (!user) {\r\n    // Redirect them to the /login page, but save the current location they were\r\n    // trying to go to when they were redirected. This allows us to send them\r\n    // along to that page after they login, which is a nicer user experience\r\n    // than dropping them off on the home page.\r\n    return <Navigate to=\"/signUp\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n}\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport firebaseReducer from '../firebase/firebaseSlice';\r\nimport AssignReducer from '../components/Assign/AssignSlice';\r\nimport SignDocumentReducer from '../components/SignDocument/SignDocumentSlice';\r\nimport ViewDocumentReducer from '../components/ViewDocument/ViewDocumentSlice';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    firebase: firebaseReducer,\r\n    assign: AssignReducer,\r\n    signDoc: SignDocumentReducer,\r\n    viewDoc: ViewDocumentReducer,\r\n  },\r\n});\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport store from \"./app/store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}