{"version":3,"sources":["components/Assign/AssignSlice.js","components/Assign/Assign.js","components/MergeAnnotations/MergeAnnotations.js","firebase/firebase.js","firebase/firebaseSlice.js","components/Profile/Profile.js","components/AssignUsers.js","components/SignIn/SignIn.js","components/SignUp/SignUp.js","components/PrepareDocument/PrepareDocument.js","components/Preparation.js","components/SignDocument/SignDocumentSlice.js","components/SignDocument/SignDocument.js","components/Sign.js","components/ViewDocument/ViewDocumentSlice.js","components/ViewDocument/ViewDocument.js","components/View.js","components/Header.js","components/PasswordReset/PasswordReset.js","components/Lists/SignList.js","components/Lists/SignedList.js","components/Welcome.js","App.js","app/store.js","index.js"],"names":["AssignSlice","createSlice","name","initialState","signees","reducers","addSignee","state","action","key","payload","email","resetSignee","console","log","actions","selectAssignees","assign","Assign","useState","setEmail","displayName","setDisplayName","showToast","setShowToast","assignees","useSelector","dispatch","useDispatch","padding","size","id","onChange","event","value","placeholder","label","type","onClick","Date","getTime","addUser","text","color","inline","Header","Row","HeaderCell","weight","Body","map","user","Cell","length","navigate","setTimeout","fit","dangerouslySetInlineStyle","__style","bottom","left","transform","paddingX","position","mergeAnnotations","docRef","xfdf","a","Core","window","PDFNet","setWorkerPath","storageRef","storage","ref","child","getDownloadURL","URL","main","PDFDoc","createFromURL","doc","initSecurityHandler","i","FDFDoc","createFromXFDF","fdfDoc","fdfMerge","flattenAnnotations","saveMemoryBuffer","SDFDoc","SaveOptions","e_linearized","docbuf","blob","Blob","put","then","snapshot","runWithCleanup","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","additionalData","userRef","uid","get","exists","photoURL","set","error","getUserDocument","userDocument","data","addDocumentToSign","emails","signedBy","requestedTime","collection","add","signed","signedTime","catch","updateDocumentToSign","docId","xfdfSigned","documentRef","includes","signedByArray","xfdfArray","update","time","searchForDocumentToSign","documentsRef","query","where","querySigned","docIds","docIdSigned","querySnapshot","forEach","push","searchForDocumentsSigned","firebaseSlice","docs","docsSigned","setUser","selectUser","ProfilePage","display","direction","paddingY","span","to","className","src","signOut","accessibilityLabel","AssignUsers","SignIn","password","setPassword","setError","signInWithEmailAndPassword","signInWithEmailAndPasswordHandler","SignUp","createUserWithEmailAndPasswordHandler","createUserWithEmailAndPassword","PrepareDocument","instance","setInstance","dropPoint","setDropPoint","assigneesValues","initialAssignee","assignee","setAssignee","viewer","useRef","filePicker","useEffect","WebViewer","path","disabledElements","current","iframeWindow","UI","setToolbarGroup","iframeDoc","document","body","addEventListener","dragOver","e","drop","onchange","file","target","files","loadDocument","applyFields","Annotations","documentViewer","annotationManager","getAnnotationManager","fieldManager","getFieldManager","annotationsList","getAnnotationsList","annotsToDelete","annotsToDraw","Promise","all","annot","index","custom","field","Forms","Field","getContents","now","inputAnnot","TextWidgetAnnotation","SignatureWidgetAnnotation","appearance","appearances","_DEFAULT","Normal","offset","x","y","F","javascript","K","DatePickerWidgetAnnotation","deleteAnnotation","PageNumber","getPageNumber","X","getX","Y","getY","rotation","Rotation","Width","getWidth","Height","getHeight","WidgetAnnotation","getCustomStyles","widget","border","addAnnotation","addField","deleteAnnotations","drawAnnotationsFromList","uploadForSigning","point","flag","getDocument","displayMode","getDisplayModeManager","getDisplayMode","page","getSelectedPages","first","page_idx","getCurrentPage","page_info","getPageInfo","page_point","windowToPage","zoom","getZoom","textAnnot","FreeTextAnnotation","getCompleteRotation","width","height","setPadding","Rect","setContents","FontSize","FillColor","Color","TextColor","StrokeThickness","StrokeColor","TextAlign","Author","getCurrentUser","deselectAllAnnotations","redrawAnnotation","selectAnnotation","referenceString","docViewer","annotManager","exportAnnotations","widgets","fields","xfdfString","getFileData","arr","Uint8Array","preventDefault","scrollElement","getScrollViewElement","scrollLeft","scrollTop","pageX","pageY","dragStart","style","opacity","copy","cloneNode","appendChild","dataTransfer","setDragImage","setData","dragEnd","removeChild","getElementById","flex","gap","click","iconEnd","options","draggable","onDragStart","onDragEnd","Preparation","SignDocumentSlice","docToSign","setDocToSign","resetDocToSign","selectDocToSign","signDoc","SignDocument","setAnnotationManager","annotPosition","setAnnotPosition","normalStyles","on","annotations","imported","fieldName","startsWith","Hidden","Listable","completeSigning","links","annots","jumpToAnnotation","Sign","ViewDocumentSlice","docToView","setDocToView","resetDocToView","selectDocToView","viewDoc","ViewDocument","doneViewing","downloadPdf","View","PasswordReset","emailHasBeenSent","setEmailHasBeenSent","sendPasswordResetEmail","SignList","setDocs","show","setShow","docsToSign","seconds","toDateString","SignedList","docsToView","App","onAuthStateChanged","userAuth","Welcome","configureStore","reducer","firebaseReducer","AssignReducer","SignDocumentReducer","ViewDocumentReducer","ReactDOM","render","StrictMode","store"],"mappings":"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","file":"static/js/main.cb0c6255.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nexport const AssignSlice = createSlice({\n  name: 'assign',\n  initialState: {\n    signees: [],\n  },\n  reducers: {\n    addSignee: (state, action) => {\n      state.signees = [...state.signees, { key: action.payload.key, name: action.payload.name, email: action.payload.email } ];\n    },\n    resetSignee: (state, action) => {\n      console.log('resetSignee');\n      state.signees = [];\n    }\n  },\n});\n\nexport const { addSignee, resetSignee } = AssignSlice.actions;\n\nexport const selectAssignees = state => state.assign.signees;\n\nexport default AssignSlice.reducer;\n","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport {\n  Box,\n  Button,\n  Container,\n  Heading,\n  TextField,\n  Table,\n  Text,\n  Toast,\n} from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { addSignee, selectAssignees } from './AssignSlice';\n\nconst Assign = () => {\n  const [email, setEmail] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [showToast, setShowToast] = useState(false);\n  const assignees = useSelector(selectAssignees);\n  const dispatch = useDispatch();\n\n  const prepare = () => {\n    if (assignees.length > 0) {\n      navigate(`/prepareDocument`);\n    } else {\n      setShowToast(true);\n      setTimeout(() => setShowToast(false), 1000);\n    }\n  };\n\n  const addUser = (name, email) => {\n    const key = `${new Date().getTime()}${email}`;\n    if (name !== '' && email !== '') {\n      dispatch(addSignee({ key, name, email }));\n      setEmail('');\n      setDisplayName('');\n    }\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            <Heading size=\"md\">Who needs to sign?</Heading>\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"displayName\"\n              onChange={event => setDisplayName(event.value)}\n              placeholder=\"Enter recipient's name\"\n              label=\"Name\"\n              value={displayName}\n              type=\"text\"\n            />\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter recipient's email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                addUser(displayName, email);\n              }}\n              text=\"Add user\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n          <Box padding={2}>\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">Name</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">Email</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {assignees.map(user => (\n                  <Table.Row key={user.key}>\n                    <Table.Cell>\n                      <Text>{user.name}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>{user.email}</Text>\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </Box>\n          <Box padding={2}>\n            <Button onClick={prepare} text=\"Continue\" color=\"blue\" inline />\n          </Box>\n          <Box\n            fit\n            dangerouslySetInlineStyle={{\n              __style: {\n                bottom: 50,\n                left: '50%',\n                transform: 'translateX(-50%)',\n              },\n            }}\n            paddingX={1}\n            position=\"fixed\"\n          >\n            {showToast && (\n              <Toast color=\"red\" text={<>Please add at least one user</>} />\n            )}\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\n\nexport default Assign;\n","import { storage } from '../../firebase/firebase';\n\nexport const mergeAnnotations = async (docRef, xfdf) => {\n  const Core = window.Core;\n  const PDFNet = window.PDFNet;\n  Core.setWorkerPath('./webviewer/core');\n\n  const storageRef = storage.ref();\n  const URL = await storageRef.child(docRef).getDownloadURL();\n  \n  const main = async () => {\n    const doc = await PDFNet.PDFDoc.createFromURL(URL);\n    doc.initSecurityHandler();\n\n    let i;\n    for (i=0; i < xfdf.length; i++) {\n        console.log(xfdf[i]);\n        let fdfDoc = await PDFNet.FDFDoc.createFromXFDF(xfdf[i]);\n        await doc.fdfMerge(fdfDoc);\n        await doc.flattenAnnotations();\n    }\n  \n    const docbuf = await doc.saveMemoryBuffer(\n      PDFNet.SDFDoc.SaveOptions.e_linearized,\n    );\n    const blob = new Blob([docbuf], {\n      type: 'application/pdf',\n    });\n  \n    const documentRef = storageRef.child(docRef);\n  \n    documentRef.put(blob).then(function (snapshot) {\n      console.log('Uploaded the blob');\n    });\n  }\n\n  await PDFNet.runWithCleanup(main);\n};\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport 'firebase/storage';\n\nimport { mergeAnnotations } from '../components/MergeAnnotations/MergeAnnotations';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport const storage = firebase.storage();\n\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\n\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return;\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n  if (!snapshot.exists) {\n    const { email, displayName, photoURL } = user;\n    try {\n      await userRef.set({\n        displayName,\n        email,\n        photoURL,\n        ...additionalData,\n      });\n    } catch (error) {\n      console.error('Error creating user document', error);\n    }\n  }\n  return getUserDocument(user.uid);\n};\n\nconst getUserDocument = async uid => {\n  if (!uid) return null;\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    return {\n      uid,\n      ...userDocument.data(),\n    };\n  } catch (error) {\n    console.error('Error fetching user', error);\n  }\n};\n\nexport const addDocumentToSign = async (uid, email, docRef, emails) => {\n  if (!uid) return;\n  const signed = false;\n  const xfdf = [];\n  const signedBy = [];\n  const requestedTime = new Date();\n  const signedTime = '';\n  firestore\n    .collection('documentsToSign')\n    .add({\n      uid,\n      email,\n      docRef,\n      emails,\n      xfdf,\n      signedBy,\n      signed,\n      requestedTime,\n      signedTime,\n    })\n    .then(function (docRef) {\n      console.log('Document written with ID: ', docRef.id);\n    })\n    .catch(function (error) {\n      console.error('Error adding document: ', error);\n    });\n};\n\nexport const updateDocumentToSign = async (docId, email, xfdfSigned) => {\n  const documentRef = firestore.collection('documentsToSign').doc(docId);\n  documentRef\n    .get()\n    .then(async doc => {\n      if (doc.exists) {\n        const { signedBy, emails, xfdf, docRef } = doc.data();\n        if (!signedBy.includes(email)) {\n          const signedByArray = [...signedBy, email];\n          const xfdfArray = [...xfdf, xfdfSigned];\n          await documentRef.update({\n            xfdf: xfdfArray,\n            signedBy: signedByArray,\n          });\n\n          if (signedByArray.length === emails.length) {\n            const time = new Date();\n            await documentRef.update({\n              signed: true,\n              signedTime: time,\n            });\n\n            mergeAnnotations(docRef, xfdfArray);\n          }\n        }\n      } else {\n        console.log('No such document!');\n      }\n    })\n    .catch(function (error) {\n      console.log('Error getting document:', error);\n    });\n};\n\nexport const searchForDocumentToSign = async email => {\n  const documentsRef = firestore.collection('documentsToSign');\n  const query = documentsRef\n    .where('emails', 'array-contains', email)\n    .where('signed', '==', false);\n\n  const querySigned = documentsRef\n    .where('signedBy', 'array-contains', email);\n\n  const docIds = [];\n  const docIdSigned = [];\n\n  await querySigned\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const docId = doc.id;\n        docIdSigned.push(docId);\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n\n  await query\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const { docRef, email, requestedTime } = doc.data();\n        const docId = doc.id;\n        if (!docIdSigned.includes(docId)) {\n          docIds.push({ docRef, email, requestedTime, docId });\n        }\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n  return docIds;\n};\n\nexport const searchForDocumentsSigned = async email => {\n  const documentsRef = firestore.collection('documentsToSign');\n\n  const docIds = [];\n\n  let query = documentsRef\n    .where('email', '==', email)\n    .where('signed', '==', true);\n\n  await query\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const { docRef, emails, signedTime } = doc.data();\n        const docId = doc.id;\n        docIds.push({ docRef, emails, signedTime, docId });\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n\n  return docIds;\n};\n","import { createSlice } from '@reduxjs/toolkit';\n\nexport const firebaseSlice = createSlice({\n  name: 'firebase',\n  initialState: {\n    user: null,\n    docs: [],\n    docsSigned: [],\n  },\n  reducers: {\n    setUser: (state, action) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.user = action.payload;\n    },\n  },\n});\n\nexport const { setUser } = firebaseSlice.actions;\n\n// The function below is called a selector and allows us to select a value from\n// the state. Selectors can also be defined inline where they're used instead of\n// in the slice file. For example: `useSelector((state) => state.counter.value)`\nexport const selectUser = state => state.firebase.user;\n\nexport default firebaseSlice.reducer;\n","import React from 'react';\nimport {\n  Box,\n  Button,\n  Text,\n  Avatar,\n  Row,\n  Stack,\n  Column,\n  Heading,\n} from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { auth } from '../../firebase/firebase';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectUser, setUser } from '../../firebase/firebaseSlice';\nimport { resetSignee } from '../Assign/AssignSlice';\nimport { navigate, Link } from '@reach/router';\nimport './Profile.css';\n\n\nconst ProfilePage = () => {\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n  const { displayName, photoURL, email } = user;\n\n  return (\n    <Box display=\"flex\" direction=\"row\" paddingY={2} color={'lightGray'}>\n      <Column span={9}>\n        <Box padding={3}>\n          <Link to=\"/\" className='profileLink'><Heading size=\"lg\">PDFTron Sign App</Heading></Link>\n        </Box>\n      </Column>\n      <Column span={3}>\n        <Box padding={1}>\n          <Row>\n            <Box padding={1}>\n              <Avatar name={displayName} size=\"md\" src={photoURL} />\n            </Box>\n            <Stack>\n              <Text weight=\"bold\">{displayName}</Text>\n              <Text>{email}</Text>\n            </Stack>\n            <Box padding={1}>\n              <Button\n                onClick={() => {\n                  auth.signOut();\n                  dispatch(setUser(null));\n                  dispatch(resetSignee())\n                  navigate('/');\n                }}\n                accessibilityLabel=\"Sign out of your account\"\n                text=\"Sign out\"\n              />\n            </Box>\n          </Row>\n        </Box>\n      </Column>\n    </Box>\n  );\n};\nexport default ProfilePage;\n","import React from 'react';\nimport Assign from './Assign/Assign';\nimport Profile from './Profile/Profile';\n\nconst AssignUsers = () => {\n  return (\n    <div>\n      <Profile />\n      <Assign />\n    </div>\n  );\n};\n\nexport default AssignUsers;\n","import React, { useState } from 'react';\nimport { Link, navigate } from '@reach/router';\nimport { auth, signInWithGoogle } from '../../firebase/firebase';\nimport {\n  Box,\n  Button,\n  Toast,\n  Container,\n  Text,\n  TextField,\n  Heading,\n} from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nconst SignIn = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n\n  const signInWithEmailAndPasswordHandler = (event, email, password) => {\n    auth.signInWithEmailAndPassword(email, password).catch(error => {\n      setError(\"Error signing in with password and email!\");\n      console.error(\"Error signing in with password and email\", error);\n    });\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            {error !== null && <Toast text={error} />}\n            <Heading size=\"md\">Sign in</Heading>\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter your email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"password\"\n              onChange={event => setPassword(event.value)}\n              placeholder=\"Enter your password\"\n              label=\"Password\"\n              value={password}\n              type=\"password\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                signInWithEmailAndPasswordHandler(event, email, password);\n                navigate('/');\n              }}\n              text=\"Sign in\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n\n          <Box padding={2}>\n            <Text>or</Text>\n          </Box>\n          <Box padding={2}>\n            <Button onClick={signInWithGoogle} text=\"Sign in with Google\" color=\"red\" inline />\n          </Box>\n          <Box padding={2}>\n            <Text>Don't have an account?</Text>\n          </Box>\n          <Box padding={2}>\n            <Link to=\"signUp\" className=\"text-blue-500 hover:text-blue-600\">\n              Sign up here\n            </Link>\n          </Box>\n          <Box padding={2}>\n            <Link\n              to=\"passwordReset\"\n              className=\"text-blue-500 hover:text-blue-600\"\n            >\n              Forgot Password?\n            </Link>\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\nexport default SignIn;\n","import React, { useState } from 'react';\nimport { Link, navigate } from '@reach/router';\nimport { auth, signInWithGoogle, generateUserDocument } from '../../firebase/firebase';\nimport {\n    Box,\n    Button,\n    Toast,\n    Container,\n    Text,\n    TextField,\n    Heading,\n  } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nconst SignUp = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [error, setError] = useState(null);\n\n  const createUserWithEmailAndPasswordHandler = async (event, email, password) => {\n    try{\n      const {user} = await auth.createUserWithEmailAndPassword(email, password);\n      generateUserDocument(user, {displayName});\n    }\n    catch(error){\n      setError('Error Signing up with email and password');\n    }\n\n    setEmail(\"\");\n    setPassword(\"\");\n    setDisplayName(\"\");\n  };\n\n  return (\n    <div>\n    <Box padding={3}>\n      <Container>\n        <Box padding={3}>\n          {error !== null && <Toast text={error} />}\n          <Heading size=\"md\">Sign up</Heading>\n        </Box>\n        <Box padding={2}>\n          <TextField\n            id=\"displayName\"\n            onChange={event => setDisplayName(event.value)}\n            placeholder=\"Enter your name\"\n            label=\"Name\"\n            value={displayName}\n            type=\"text\"\n          />\n        </Box>\n        <Box padding={2}>\n          <TextField\n            id=\"email\"\n            onChange={event => setEmail(event.value)}\n            placeholder=\"Enter your email\"\n            label=\"Email\"\n            value={email}\n            type=\"email\"\n          />\n        </Box>\n        <Box padding={2}>\n          <TextField\n            id=\"password\"\n            onChange={event => setPassword(event.value)}\n            placeholder=\"Enter your password\"\n            label=\"Password\"\n            value={password}\n            type=\"password\"\n          />\n        </Box>\n        <Box padding={2}>\n          <Button\n            onClick={event => {\n                createUserWithEmailAndPasswordHandler(event, email, password);\n                navigate('/');\n              }}\n            text=\"Sign up\"\n            color=\"blue\"\n            inline\n          />\n        </Box>\n\n        <Box padding={2}>\n          <Text>or</Text>\n        </Box>\n        <Box padding={2}>\n          <Button onClick={signInWithGoogle} text=\"Sign in with Google\" color=\"red\" inline />\n        </Box>\n        <Box padding={2}>\n          <Text>Already have an account?</Text>\n        </Box>\n        <Box padding={2}>\n        <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\n            Sign in here\n          </Link>\n        </Box>\n      </Container>\n    </Box>\n  </div>\n  );\n};\nexport default SignUp;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport {\n  Box,\n  Column,\n  Heading,\n  Row,\n  Stack,\n  Text,\n  Button,\n  SelectList,\n} from 'gestalt';\nimport { selectAssignees, resetSignee } from '../Assign/AssignSlice';\nimport { storage, addDocumentToSign } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport WebViewer from '@pdftron/webviewer';\nimport 'gestalt/dist/gestalt.css';\nimport './PrepareDocument.css';\n\nconst PrepareDocument = () => {\n  const [instance, setInstance] = useState(null);\n  const [dropPoint, setDropPoint] = useState(null);\n\n  const dispatch = useDispatch();\n\n  const assignees = useSelector(selectAssignees);\n  const assigneesValues = assignees.map(user => {\n    return { value: user.email, label: user.name };\n  });\n  let initialAssignee =\n    assigneesValues.length > 0 ? assigneesValues[0].value : '';\n  const [assignee, setAssignee] = useState(initialAssignee);\n\n  const user = useSelector(selectUser);\n  const { uid, email } = user;\n\n  const viewer = useRef(null);\n  const filePicker = useRef(null);\n\n  // if using a class, equivalent of componentDidMount\n  useEffect(() => {\n    WebViewer(\n      {\n        path: 'webviewer',\n        disabledElements: [\n          'ribbons',\n          'toggleNotesButton',\n          'searchButton',\n          'menuButton',\n        ],\n      },\n      viewer.current,\n    ).then(instance => {\n      const { iframeWindow } = instance;\n\n      // select only the view group\n      instance.UI.setToolbarGroup('toolbarGroup-View');\n\n      setInstance(instance);\n\n      const iframeDoc = iframeWindow.document.body;\n      iframeDoc.addEventListener('dragover', dragOver);\n      iframeDoc.addEventListener('drop', e => {\n        drop(e, instance);\n      });\n\n      filePicker.current.onchange = e => {\n        const file = e.target.files[0];\n        if (file) {\n          instance.UI.loadDocument(file);\n        }\n      };\n    });\n  }, []);\n\n  const applyFields = async () => {\n    const { Annotations, documentViewer } = instance.Core;\n    const annotationManager = documentViewer.getAnnotationManager();\n    const fieldManager = annotationManager.getFieldManager();\n    const annotationsList = annotationManager.getAnnotationsList();\n    const annotsToDelete = [];\n    const annotsToDraw = [];\n\n    await Promise.all(\n      annotationsList.map(async (annot, index) => {\n        let inputAnnot;\n        let field;\n\n        if (typeof annot.custom !== 'undefined') {\n          // create a form field based on the type of annotation\n          if (annot.custom.type === 'TEXT') {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: 'Tx',\n                value: annot.custom.value,\n              },\n            );\n            inputAnnot = new Annotations.TextWidgetAnnotation(field);\n          } else if (annot.custom.type === 'SIGNATURE') {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: 'Sig',\n              },\n            );\n            inputAnnot = new Annotations.SignatureWidgetAnnotation(field, {\n              appearance: '_DEFAULT',\n              appearances: {\n                _DEFAULT: {\n                  Normal: {\n                    data:\n                      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuMWMqnEsAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC',\n                    offset: {\n                      x: 100,\n                      y: 100,\n                    },\n                  },\n                },\n              },\n            });\n          } else if (annot.custom.type === 'DATE') {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: 'Tx',\n                value: 'm-d-yyyy',\n                // Actions need to be added for DatePickerWidgetAnnotation to recognize this field.\n                actions: {\n                  F: [\n                    {\n                      name: 'JavaScript',\n                      // You can customize the date format here between the two double-quotation marks\n                      // or leave this blank to use the default format\n                      javascript: 'AFDate_FormatEx(\"mmm d, yyyy\");',\n                    },\n                  ],\n                  K: [\n                    {\n                      name: 'JavaScript',\n                      // You can customize the date format here between the two double-quotation marks\n                      // or leave this blank to use the default format\n                      javascript: 'AFDate_FormatEx(\"mmm d, yyyy\");',\n                    },\n                  ],\n                },\n              },\n            );\n  \n            inputAnnot = new Annotations.DatePickerWidgetAnnotation(field);\n          } else {\n            // exit early for other annotations\n            annotationManager.deleteAnnotation(annot, false, true); // prevent duplicates when importing xfdf\n            return;\n          }\n        } else {\n          // exit early for other annotations\n          return;\n        }\n\n        // set position\n        inputAnnot.PageNumber = annot.getPageNumber();\n        inputAnnot.X = annot.getX();\n        inputAnnot.Y = annot.getY();\n        inputAnnot.rotation = annot.Rotation;\n        if (annot.Rotation === 0 || annot.Rotation === 180) {\n          inputAnnot.Width = annot.getWidth();\n          inputAnnot.Height = annot.getHeight();\n        } else {\n          inputAnnot.Width = annot.getHeight();\n          inputAnnot.Height = annot.getWidth();\n        }\n\n        // delete original annotation\n        annotsToDelete.push(annot);\n\n        // customize styles of the form field\n        Annotations.WidgetAnnotation.getCustomStyles = function (widget) {\n          if (widget instanceof Annotations.SignatureWidgetAnnotation) {\n            return {\n              border: '1px solid #a5c7ff',\n            };\n          }\n        };\n        Annotations.WidgetAnnotation.getCustomStyles(inputAnnot);\n\n        // draw the annotation the viewer\n        annotationManager.addAnnotation(inputAnnot);\n        fieldManager.addField(field);\n        annotsToDraw.push(inputAnnot);\n      }),\n    );\n\n    // delete old annotations\n    annotationManager.deleteAnnotations(annotsToDelete, null, true);\n\n    // refresh viewer\n    await annotationManager.drawAnnotationsFromList(annotsToDraw);\n    await uploadForSigning();\n  };\n\n  const addField = (type, point = {}, name = '', value = '', flag = {}) => {\n    const { documentViewer, Annotations } = instance.Core;\n    const annotationManager = documentViewer.getAnnotationManager();\n    const doc = documentViewer.getDocument();\n    const displayMode = documentViewer.getDisplayModeManager().getDisplayMode();\n    const page = displayMode.getSelectedPages(point, point);\n    if (!!point.x && page.first == null) {\n      return; //don't add field to an invalid page location\n    }\n    const page_idx =\n      page.first !== null ? page.first : documentViewer.getCurrentPage();\n    const page_info = doc.getPageInfo(page_idx);\n    const page_point = displayMode.windowToPage(point, page_idx);\n    const zoom = documentViewer.getZoom();\n\n    var textAnnot = new Annotations.FreeTextAnnotation();\n    textAnnot.PageNumber = page_idx;\n    const rotation = documentViewer.getCompleteRotation(page_idx) * 90;\n    textAnnot.Rotation = rotation;\n    if (rotation === 270 || rotation === 90) {\n      textAnnot.Width = 50.0 / zoom;\n      textAnnot.Height = 250.0 / zoom;\n    } else {\n      textAnnot.Width = 250.0 / zoom;\n      textAnnot.Height = 50.0 / zoom;\n    }\n    textAnnot.X = (page_point.x || page_info.width / 2) - textAnnot.Width / 2;\n    textAnnot.Y = (page_point.y || page_info.height / 2) - textAnnot.Height / 2;\n\n    textAnnot.setPadding(new Annotations.Rect(0, 0, 0, 0));\n    textAnnot.custom = {\n      type,\n      value,\n      flag,\n      name: `${assignee}_${type}_`,\n    };\n\n    // set the type of annot\n    textAnnot.setContents(textAnnot.custom.name);\n    textAnnot.FontSize = '' + 20.0 / zoom + 'px';\n    textAnnot.FillColor = new Annotations.Color(211, 211, 211, 0.5);\n    textAnnot.TextColor = new Annotations.Color(0, 165, 228);\n    textAnnot.StrokeThickness = 1;\n    textAnnot.StrokeColor = new Annotations.Color(0, 165, 228);\n    textAnnot.TextAlign = 'center';\n\n    textAnnot.Author = annotationManager.getCurrentUser();\n\n    annotationManager.deselectAllAnnotations();\n    annotationManager.addAnnotation(textAnnot, true);\n    annotationManager.redrawAnnotation(textAnnot);\n    annotationManager.selectAnnotation(textAnnot);\n  };\n\n  const uploadForSigning = async () => {\n    // upload the PDF with fields as AcroForm\n    const storageRef = storage.ref();\n    const referenceString = `docToSign/${uid}${Date.now()}.pdf`;\n    const docRef = storageRef.child(referenceString);\n    const { docViewer, annotManager } = instance;\n    const doc = docViewer.getDocument();\n    const xfdfString = await annotManager.exportAnnotations({ widgets: true, fields: true });\n    const data = await doc.getFileData({ xfdfString });\n    const arr = new Uint8Array(data);\n    const blob = new Blob([arr], { type: 'application/pdf' });\n    docRef.put(blob).then(function (snapshot) {\n      console.log('Uploaded the blob');\n    });\n\n    // create an entry in the database\n    const emails = assignees.map(assignee => {\n      return assignee.email;\n    });\n    await addDocumentToSign(uid, email, referenceString, emails);\n    dispatch(resetSignee());\n    navigate('/');\n  };\n\n  const dragOver = e => {\n    e.preventDefault();\n    return false;\n  };\n\n  const drop = (e, instance) => {\n    const { docViewer } = instance;\n    const scrollElement = docViewer.getScrollViewElement();\n    const scrollLeft = scrollElement.scrollLeft || 0;\n    const scrollTop = scrollElement.scrollTop || 0;\n    setDropPoint({ x: e.pageX + scrollLeft, y: e.pageY + scrollTop });\n    e.preventDefault();\n    return false;\n  };\n\n  const dragStart = e => {\n    e.target.style.opacity = 0.5;\n    const copy = e.target.cloneNode(true);\n    copy.id = 'form-build-drag-image-copy';\n    copy.style.width = '250px';\n    document.body.appendChild(copy);\n    e.dataTransfer.setDragImage(copy, 125, 25);\n    e.dataTransfer.setData('text', '');\n  };\n\n  const dragEnd = (e, type) => {\n    addField(type, dropPoint);\n    e.target.style.opacity = 1;\n    document.body.removeChild(\n      document.getElementById('form-build-drag-image-copy'),\n    );\n    e.preventDefault();\n  };\n\n  return (\n    <div className={'prepareDocument'}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">Prepare Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{'Step 1'}</Text>\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={() => {\n                      if (filePicker) {\n                        filePicker.current.click();\n                      }\n                    }}\n                    accessibilityLabel=\"upload a document\"\n                    text=\"Upload a document\"\n                    iconEnd=\"add-circle\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n            <Row>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{'Step 2'}</Text>\n                </Box>\n                <Box padding={2}>\n                  <SelectList\n                    id=\"assigningFor\"\n                    name=\"assign\"\n                    onChange={({ value }) => setAssignee(value)}\n                    options={assigneesValues}\n                    placeholder=\"Select recipient\"\n                    label=\"Adding signature for\"\n                    value={assignee}\n                  />\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={e => dragStart(e)}\n                    onDragEnd={e => dragEnd(e, 'SIGNATURE')}\n                  >\n                    <Button\n                      onClick={() => addField('SIGNATURE')}\n                      accessibilityLabel=\"add signature\"\n                      text=\"Add signature\"\n                      iconEnd=\"compose\"\n                    />\n                  </div>\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={e => dragStart(e)}\n                    onDragEnd={e => dragEnd(e, 'TEXT')}\n                  >\n                    <Button\n                      onClick={() => addField('TEXT')}\n                      accessibilityLabel=\"add text\"\n                      text=\"Add text\"\n                      iconEnd=\"text-sentence-case\"\n                    />\n                  </div>\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={e => dragStart(e)}\n                    onDragEnd={e => dragEnd(e, 'DATE')}\n                  >\n                    <Button\n                      onClick={() => addField('DATE')}\n                      accessibilityLabel=\"add date field\"\n                      text=\"Add date\"\n                      iconEnd=\"calendar\"\n                    />\n                  </div>\n                </Box>\n              </Stack>\n            </Row>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{'Step 3'}</Text>\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={applyFields}\n                    accessibilityLabel=\"Send for signing\"\n                    text=\"Send\"\n                    iconEnd=\"send\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n      <input type=\"file\" ref={filePicker} style={{ display: 'none' }} />\n    </div>\n  );\n};\n\nexport default PrepareDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport PrepareDocument from './PrepareDocument/PrepareDocument';\n\nconst Preparation = () => {\n  return (\n    <div>\n      <Profile />\n      <PrepareDocument />\n    </div>\n  );\n};\n\nexport default Preparation;","import { createSlice } from '@reduxjs/toolkit';\n\nexport const SignDocumentSlice = createSlice({\n  name: 'signDoc',\n  initialState: {\n    docToSign: null,\n  },\n  reducers: {\n    setDocToSign: (state, action) => {\n      state.docToSign = action.payload;\n    },\n    resetDocToSign: (state, action) => {\n      state.docToSign = null;\n    }\n  },\n});\n\nexport const { setDocToSign, resetDocToSign } = SignDocumentSlice.actions;\n\nexport const selectDocToSign = state => state.signDoc.docToSign;\n\nexport default SignDocumentSlice.reducer;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport { Box, Column, Heading, Row, Stack, Button } from 'gestalt';\nimport { selectDocToSign } from './SignDocumentSlice';\nimport { storage, updateDocumentToSign } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport WebViewer from '@pdftron/webviewer';\nimport 'gestalt/dist/gestalt.css';\nimport './SignDocument.css';\n\nconst SignDocument = () => {\n  const [annotationManager, setAnnotationManager] = useState(null);\n  const [annotPosition, setAnnotPosition] = useState(0);\n\n  const doc = useSelector(selectDocToSign);\n  const user = useSelector(selectUser);\n  const { docRef, docId } = doc;\n  const { email } = user;\n\n  const viewer = useRef(null);\n\n  useEffect(() => {\n    WebViewer(\n      {\n        path: 'webviewer',\n        disabledElements: [\n          'ribbons',\n          'toggleNotesButton',\n          'searchButton',\n          'menuButton',\n          'rubberStampToolGroupButton',\n          'stampToolGroupButton',\n          'fileAttachmentToolGroupButton',\n          'calloutToolGroupButton',\n          'undo',\n          'redo',\n          'eraserToolButton'\n        ],\n      },\n      viewer.current,\n    ).then(async instance => {\n      const { documentViewer, annotationManager, Annotations } = instance.Core;\n      setAnnotationManager(annotationManager);\n\n      // select only the insert group\n      instance.UI.setToolbarGroup('toolbarGroup-Insert');\n\n      // load document\n      const storageRef = storage.ref();\n      const URL = await storageRef.child(docRef).getDownloadURL();\n      documentViewer.loadDocument(URL);\n\n      const normalStyles = (widget) => {\n        if (widget instanceof Annotations.TextWidgetAnnotation) {\n          return {\n            'background-color': '#a5c7ff',\n            color: 'white',\n          };\n        } else if (widget instanceof Annotations.SignatureWidgetAnnotation) {\n          return {\n            border: '1px solid #a5c7ff',\n          };\n        }\n      };\n\n      annotationManager.on('annotationChanged', (annotations, action, { imported }) => {\n        if (imported && action === 'add') {\n          annotations.forEach(function(annot) {\n            if (annot instanceof Annotations.WidgetAnnotation) {\n              Annotations.WidgetAnnotation.getCustomStyles = normalStyles;\n              if (!annot.fieldName.startsWith(email)) {\n                annot.Hidden = true;\n                annot.Listable = false;\n              }\n            }\n          });\n        }\n      });\n    });\n  }, [docRef, email]);\n\n  const nextField = () => {\n    let annots = annotationManager.getAnnotationsList();\n    if (annots[annotPosition]) {\n      annotationManager.jumpToAnnotation(annots[annotPosition]);\n      if (annots[annotPosition+1]) {\n        setAnnotPosition(annotPosition+1);\n      }\n    }\n  }\n\n  const prevField = () => {\n    let annots = annotationManager.getAnnotationsList();\n    if (annots[annotPosition]) {\n      annotationManager.jumpToAnnotation(annots[annotPosition]);\n      if (annots[annotPosition-1]) {\n        setAnnotPosition(annotPosition-1);\n      }\n    }\n  }\n\n  const completeSigning = async () => {\n    const xfdf = await annotationManager.exportAnnotations({ widgets: false, links: false });\n    await updateDocumentToSign(docId, email, xfdf);\n    navigate('/');\n  }\n\n  return (\n    <div className={'prepareDocument'}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">Sign Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Button\n                    onClick={nextField}\n                    accessibilityLabel=\"next field\"\n                    text=\"Next field\"\n                    iconEnd=\"arrow-forward\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={prevField}\n                    accessibilityLabel=\"Previous field\"\n                    text=\"Previous field\"\n                    iconEnd=\"arrow-back\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={completeSigning}\n                    accessibilityLabel=\"complete signing\"\n                    text=\"Complete signing\"\n                    iconEnd=\"compose\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n    </div>\n  );\n};\n\nexport default SignDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport SignDocument from './SignDocument/SignDocument';\n\nconst Sign = () => {\n  return (\n    <div>\n      <Profile />\n      <SignDocument />\n    </div>\n  );\n};\n\nexport default Sign;","import { createSlice } from '@reduxjs/toolkit';\n\nexport const ViewDocumentSlice = createSlice({\n  name: 'viewDoc',\n  initialState: {\n    docToView: null,\n  },\n  reducers: {\n    setDocToView: (state, action) => {\n      state.docToView = action.payload;\n    },\n    resetDocToView: (state, action) => {\n      state.docToView = null;\n    }\n  },\n});\n\nexport const { setDocToView, resetDocToView } = ViewDocumentSlice.actions;\n\nexport const selectDocToView = state => state.viewDoc.docToView;\n\nexport default ViewDocumentSlice.reducer;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport { Box, Column, Heading, Row, Stack, Button } from 'gestalt';\nimport { selectDocToView } from './ViewDocumentSlice';\nimport { storage } from '../../firebase/firebase';\nimport WebViewer from '@pdftron/webviewer';\nimport 'gestalt/dist/gestalt.css';\nimport './ViewDocument.css';\n\nconst ViewDocument = () => {\n  const [instance, setInstance] = useState(null);\n\n  const doc = useSelector(selectDocToView);\n  const { docRef } = doc;\n\n  const viewer = useRef(null);\n\n  useEffect(() => {\n    WebViewer(\n      {\n        path: 'webviewer',\n        disabledElements: [\n          'ribbons',\n          'toggleNotesButton',\n          'contextMenuPopup',\n        ],\n      },\n      viewer.current,\n    ).then(async instance => {\n      // select only the view group\n      instance.UI.setToolbarGroup('toolbarGroup-View');\n\n      setInstance(instance);\n\n      // load document\n      const storageRef = storage.ref();\n      const URL = await storageRef.child(docRef).getDownloadURL();\n      console.log(URL);\n      instance.Core.documentViewer.loadDocument(URL);\n    });\n  }, [docRef]);\n\n  const download = () => {\n    instance.UI.downloadPdf(true);\n  };\n\n  const doneViewing = async () => {\n    navigate('/');\n  }\n\n  return (\n    <div className={'prepareDocument'}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">View Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Button\n                    onClick={download}\n                    accessibilityLabel=\"download signed document\"\n                    text=\"Download\"\n                    iconEnd=\"download\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={doneViewing}\n                    accessibilityLabel=\"complete signing\"\n                    text=\"Done viewing\"\n                    iconEnd=\"check\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n    </div>\n  );\n};\n\nexport default ViewDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport ViewDocument from './ViewDocument/ViewDocument';\n\nconst View = () => {\n  return (\n    <div>\n      <Profile />\n      <ViewDocument />\n    </div>\n  );\n};\n\nexport default View;","import React from 'react';\nimport { Box, Column, Heading } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nconst Header = () =>  {\n    return (<Box display=\"flex\" direction=\"row\" paddingY={2} color={'lightGray'}>\n    <Column span={10}>\n      <Box padding={3}>\n        <Heading size=\"lg\">PDFTron Sign App</Heading>\n      </Box>\n    </Column>\n    </Box>);\n}\n\nexport default Header;","import React, { useState } from 'react';\nimport { Link, navigate } from '@reach/router';\nimport { Box, Button, Toast, Container, TextField, Heading } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nimport { auth } from '../../firebase/firebase';\n\nconst PasswordReset = () => {\n  const [email, setEmail] = useState('');\n  const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\n  const [error, setError] = useState(null);\n\n  const sendResetEmail = event => {\n    auth\n      .sendPasswordResetEmail(email)\n      .then(() => {\n        setEmailHasBeenSent(true);\n        setTimeout(() => {\n          setEmailHasBeenSent(false);\n        }, 3000);\n      })\n      .catch(() => {\n        setError('Error resetting password');\n      });\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            <Heading size=\"md\">Reset your password</Heading>\n          </Box>\n          {error !== null && <Toast text={error} />}\n          {emailHasBeenSent !== false && (\n            <Toast text={'An email with reset info is on the way'} />\n          )}\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter your email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                sendResetEmail(event);\n                navigate('/');\n              }}\n              text=\"Reset\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n          <Box padding={2}>\n            <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\n              Back to the Sign in\n            </Link>\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\nexport default PasswordReset;\n","import React, { useEffect, useState } from 'react';\nimport { Button, Table, Text, Spinner } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { searchForDocumentToSign } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport { setDocToSign } from '../SignDocument/SignDocumentSlice';\nimport { navigate } from '@reach/router';\n\nconst SignList = () => {\n  const user = useSelector(selectUser);\n  const { email } = user;\n\n  const [docs, setDocs] = useState([]);\n  const [show, setShow] = useState(true);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    async function getDocs() {\n      const docsToSign = await searchForDocumentToSign(email);\n      setDocs(docsToSign);\n      setShow(false);\n    }\n\n    setTimeout(getDocs, 1000);\n  }, [email]);\n\n  return (\n    <div>\n      {show ? (\n        <Spinner show={show} accessibilityLabel=\"spinner\" />\n      ) : (\n        <div>\n          {docs.length > 0 ? (\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">From</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">When</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {docs.map(doc => (\n                  <Table.Row key={doc.docRef}>\n                    <Table.Cell>\n                      <Text>{doc.email}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>{doc.requestedTime ? new Date(doc.requestedTime.seconds*1000).toDateString() : ''}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Button\n                        onClick={event => {\n                          const { docRef, docId } = doc;\n                          dispatch(setDocToSign({ docRef, docId }));\n                          navigate(`/signDocument`);\n                        }}\n                        text=\"Sign\"\n                        color=\"blue\"\n                        inline\n                      />\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          ) : (\n            'You do not have any documents to sign'\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignList;\n","import React, { useEffect, useState } from 'react';\nimport { Button, Table, Text, Spinner } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { searchForDocumentsSigned } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport { setDocToView } from '../ViewDocument/ViewDocumentSlice';\nimport { navigate } from '@reach/router';\n\nconst SignedList = () => {\n  const user = useSelector(selectUser);\n  const { email } = user;\n  const [docs, setDocs] = useState([]);\n  const [show, setShow] = useState(true);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    async function getDocs() {\n      const docsToView = await searchForDocumentsSigned(email);\n      setDocs(docsToView);\n      setShow(false);\n    }\n    setTimeout(getDocs, 1000);\n  }, [email]);\n\n  return (\n    <div>\n      {show ? (\n        <Spinner show={show} accessibilityLabel=\"spinner\" />\n      ) : (\n        <div>\n          {docs.length > 0 ? (\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">From</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">When</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {docs.map(doc => (\n                  <Table.Row key={doc.docRef}>\n                    <Table.Cell>\n                      {doc.emails.map(email => (\n                        <Text key={email}>{email}</Text>\n                      ))}\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>{doc.signedTime ? new Date(doc.signedTime.seconds*1000).toDateString() : ''}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Button\n                        onClick={event => {\n                          const { docRef, docId } = doc;\n                          dispatch(setDocToView({ docRef, docId }));\n                          navigate(`/viewDocument`);\n                        }}\n                        text=\"View\"\n                        color=\"blue\"\n                        inline\n                      />\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          ) : (\n            'You do not have any documents to review'\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignedList;\n","import React, { useEffect } from 'react';\nimport Profile from './Profile/Profile';\nimport { navigate } from '@reach/router';\nimport { useDispatch } from 'react-redux';\nimport SignList from './Lists/SignList';\nimport SignedList from './Lists/SignedList';\nimport { resetDocToView } from './ViewDocument/ViewDocumentSlice';\nimport { resetDocToSign } from './SignDocument/SignDocumentSlice';\nimport { Box, Button, Container, Heading } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\n\nconst ProfilePage = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(resetDocToView());\n    dispatch(resetDocToSign());\n  }, [dispatch]);\n\n  return (\n    <div>\n      <Profile />\n      <Container>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Sign Documents`}</Heading>\n        </Box>\n        <Box padding={3}>\n          <SignList />\n        </Box>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Prepare Document`}</Heading>\n        </Box>\n        <Box padding={2}>\n          <Button\n            onClick={event => {\n              navigate(`/assignUsers`);\n            }}\n            text=\"Prepare Document for Signing\"\n            color=\"blue\"\n            inline\n          />\n        </Box>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Review Signed Documents`}</Heading>\n        </Box>\n        <Box padding={3}>\n          <SignedList />\n        </Box>\n      </Container>\n    </div>\n  );\n};\nexport default ProfilePage;\n","import React, { useEffect } from 'react';\r\nimport { Router } from '@reach/router';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport AssignUsers from './components/AssignUsers';\r\nimport SignIn from './components/SignIn/SignIn';\r\nimport SignUp from './components/SignUp/SignUp';\r\nimport Preparation from './components/Preparation';\r\nimport Sign from './components/Sign';\r\nimport View from './components/View';\r\nimport Header from './components/Header';\r\nimport PasswordReset from './components/PasswordReset/PasswordReset';\r\nimport Welcome from './components/Welcome';\r\n\r\nimport { auth, generateUserDocument } from './firebase/firebase';\r\nimport { setUser, selectUser } from './firebase/firebaseSlice';\r\n\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged(async userAuth => {\r\n      if (userAuth) {\r\n        const user = await generateUserDocument(userAuth);\r\n        const { uid, displayName, email, photoURL } = user;\r\n        dispatch(setUser({ uid, displayName, email, photoURL }));\r\n      }\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return user ? (\r\n    <div>\r\n      <Router>\r\n        <Welcome path=\"/\" />\r\n        <AssignUsers path=\"/assignUsers\" />\r\n        <Preparation path=\"/prepareDocument\" />\r\n        <Sign path=\"/signDocument\" />\r\n        <View path=\"/viewDocument\" />\r\n      </Router>\r\n    </div>\r\n  ) : (\r\n    <div>\r\n      <Header />\r\n      <Router>\r\n        <SignIn path=\"/\" />\r\n        <SignUp path=\"signUp\" />\r\n        <PasswordReset path=\"passwordReset\" />\r\n      </Router>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport firebaseReducer from '../firebase/firebaseSlice';\r\nimport AssignReducer from '../components/Assign/AssignSlice';\r\nimport SignDocumentReducer from '../components/SignDocument/SignDocumentSlice';\r\nimport ViewDocumentReducer from '../components/ViewDocument/ViewDocumentSlice';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    firebase: firebaseReducer,\r\n    assign: AssignReducer,\r\n    signDoc: SignDocumentReducer,\r\n    viewDoc: ViewDocumentReducer,\r\n  },\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './app/store';\r\nimport { Provider } from 'react-redux';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}